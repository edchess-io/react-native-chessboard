{"version":3,"names":["useReversePiecePosition","pieceSize","playersColor","useChessboardProps","board","useBoard","isWhitePiecePosition","useMemo","calculateCol","useCallback","col","calculateRow","row","calculatePosition","x","y","rowLendth","length","toTranslation","to","tokens","split","Error","charCodeAt","indexes","parseInt","toPosition","String","fromCharCode","Math","round"],"sources":["notation.ts"],"sourcesContent":["import type { Square } from 'chess.js';\nimport { useCallback, useMemo } from 'react';\nimport { useChessboardProps } from './context/props-context/hooks';\nimport { useBoard } from './context/board-context/hooks';\n\nimport type { Vector } from './types';\n\nconst useReversePiecePosition = () => {\n  const { pieceSize, playersColor } = useChessboardProps();\n  const board = useBoard();\n\n  const isWhitePiecePosition = useMemo(\n    () => playersColor === 'w',\n    [playersColor]\n  );\n\n  const calculateCol = useCallback(\n    (col: number) => {\n      'worklet';\n      return isWhitePiecePosition ? 97 + col : 104 - col;\n    },\n    [isWhitePiecePosition]\n  );\n\n  const calculateRow = useCallback(\n    (row: number) => {\n      'worklet';\n      return isWhitePiecePosition ? 8 - row : row + 1;\n    },\n    [isWhitePiecePosition]\n  );\n\n  const calculatePosition = useCallback(\n    ({ x, y }: Vector) => {\n      'worklet';\n      const rowLendth = board[0].length;\n\n      if (isWhitePiecePosition) {\n        return { x, y };\n      }\n\n      return {\n        x: rowLendth - 1 - x,\n        y: board.length - 1 - y,\n      };\n    },\n    [board, isWhitePiecePosition]\n  );\n\n  const toTranslation = useCallback(\n    (to: Square) => {\n      'worklet';\n      const tokens = to.split('');\n      const col = tokens[0];\n      const row = tokens[1];\n      if (!col || !row) {\n        throw new Error('Invalid notation: ' + to);\n      }\n\n      const x = isWhitePiecePosition\n        ? col.charCodeAt(0) - 'a'.charCodeAt(0)\n        : 'h'.charCodeAt(0) - col.charCodeAt(0);\n\n      const indexes = {\n        x,\n        y: parseInt(row, 10) - 1,\n      };\n\n      const y = isWhitePiecePosition\n        ? 7 * pieceSize - indexes.y * pieceSize\n        : indexes.y * pieceSize + 1;\n\n      return {\n        x: indexes.x * pieceSize,\n        y,\n      };\n    },\n    [pieceSize, isWhitePiecePosition]\n  );\n\n  const toPosition = useCallback(\n    ({ x, y }: Vector) => {\n      'worklet';\n      const col = String.fromCharCode(calculateCol(Math.round(x / pieceSize)));\n      const row = `${calculateRow(Math.round(y / pieceSize))}`;\n      return `${col}${row}` as Square;\n    },\n    [pieceSize, calculateCol, calculateRow]\n  );\n\n  return {\n    toPosition,\n    toTranslation,\n    calculateCol,\n    calculateRow,\n    calculatePosition,\n    isWhitePiecePosition,\n  };\n};\n\nexport { useReversePiecePosition };\n"],"mappings":"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"}