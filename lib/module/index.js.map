{"version":3,"names":["React","useImperativeHandle","useMemo","useRef","View","StyleSheet","GestureHandlerRootView","Background","HighlightedSquares","Pieces","SuggestedDots","ChessboardContextProvider","ChessboardPropsContextProvider","DEFAULT_BOARD_SIZE","useChessboardProps","useReversePiecePosition","styles","create","container","aspectRatio","Chessboard","memo","boardSize","isBlackPiecePosition","transform","rotate","width","ChessboardContainerComponent","forwardRef","props","ref","chessboardRef","move","params","current","highlight","resetAllHighlightedSquares","getState","resetBoard","undo","fen","ChessboardContainer"],"sources":["index.tsx"],"sourcesContent":["import React, { useImperativeHandle, useMemo, useRef } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { GestureHandlerRootView } from 'react-native-gesture-handler';\n\nimport Background from './components/chessboard-background';\nimport { HighlightedSquares } from './components/highlighted-squares';\nimport { Pieces } from './components/pieces';\nimport { SuggestedDots } from './components/suggested-dots';\nimport { ChessboardContextProvider } from './context/board-context-provider';\nimport type { ChessboardRef } from './context/board-refs-context';\nimport {\n  ChessboardProps,\n  ChessboardPropsContextProvider,\n  ChessMoveInfo,\n  DEFAULT_BOARD_SIZE,\n} from './context/props-context';\nimport { useChessboardProps } from './context/props-context/hooks';\nimport type { ChessboardState } from './helpers/get-chessboard-state';\nimport { useReversePiecePosition } from './notation';\n\nconst styles = StyleSheet.create({\n  container: {\n    aspectRatio: 1,\n  },\n});\n\nconst Chessboard: React.FC = React.memo(() => {\n  const { boardSize } = useChessboardProps();\n  const { isBlackPiecePosition } = useReversePiecePosition();\n\n  const transform = useMemo(() => {\n    if (isBlackPiecePosition) {\n      return { rotate: '180deg' };\n    }\n\n    return { rotate: '0deg' };\n  }, [isBlackPiecePosition]);\n\n  return (\n    <View\n      style={[\n        styles.container,\n        {\n          width: boardSize,\n          transform: [transform],\n        },\n      ]}\n    >\n      <Background />\n      <Pieces />\n      <HighlightedSquares />\n      <SuggestedDots />\n    </View>\n  );\n});\n\nconst ChessboardContainerComponent = React.forwardRef<\n  ChessboardRef,\n  ChessboardProps\n>((props, ref) => {\n  const chessboardRef = useRef<ChessboardRef>(null);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      move: (params) => chessboardRef.current?.move?.(params),\n      highlight: (params) => chessboardRef.current?.highlight(params),\n      resetAllHighlightedSquares: () =>\n        chessboardRef.current?.resetAllHighlightedSquares(),\n      getState: () => chessboardRef?.current?.getState() as ChessboardState,\n      resetBoard: (params) => chessboardRef.current?.resetBoard(params),\n      undo: () => chessboardRef.current?.undo(),\n    }),\n    []\n  );\n\n  return (\n    <GestureHandlerRootView>\n      <ChessboardPropsContextProvider {...props}>\n        <ChessboardContextProvider ref={chessboardRef} fen={props.fen}>\n          <Chessboard />\n        </ChessboardContextProvider>\n      </ChessboardPropsContextProvider>\n    </GestureHandlerRootView>\n  );\n});\n\nconst ChessboardContainer = React.memo(ChessboardContainerComponent);\n\nexport { DEFAULT_BOARD_SIZE };\nexport type { ChessboardRef, ChessboardProps, ChessMoveInfo, ChessboardState };\nexport default ChessboardContainer;\n"],"mappings":"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"}