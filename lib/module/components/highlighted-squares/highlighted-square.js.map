{"version":3,"names":["React","useImperativeHandle","StyleSheet","Animated","useAnimatedStyle","useSharedValue","withTiming","useChessboardProps","HighlightedSquareComponent","forwardRef","ref","style","colors","lastMoveHighlight","backgroundColor","isHighlighted","borderColor","reset","value","highlight","bg","border","rHighlightedSquareStyle","opacity","borderWidth","styles","highlightedSquare","create","position","aspectRatio","HighlightedSquare","memo"],"sources":["highlighted-square.tsx"],"sourcesContent":["import React, { useImperativeHandle } from 'react';\nimport { StyleProp, StyleSheet, ViewStyle } from 'react-native';\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withTiming,\n} from 'react-native-reanimated';\nimport { useChessboardProps } from '../../context/props-context/hooks';\n\ntype HighlightedSquareProps = {\n  style?: StyleProp<ViewStyle>;\n};\n\nexport type HighlightedSquareRefType = {\n  isHighlighted: () => boolean;\n  reset: () => void;\n  highlight: (_?: { backgroundColor?: string; borderColor?: string }) => void;\n};\n\nconst HighlightedSquareComponent = React.forwardRef<\n  HighlightedSquareRefType,\n  HighlightedSquareProps\n>(({ style }, ref) => {\n  const {\n    colors: { lastMoveHighlight },\n  } = useChessboardProps();\n  const backgroundColor = useSharedValue(lastMoveHighlight);\n  const isHighlighted = useSharedValue(false);\n  const borderColor = useSharedValue(lastMoveHighlight);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      reset: () => {\n        isHighlighted.value = false;\n      },\n      highlight: ({ backgroundColor: bg, borderColor: border } = {}) => {\n        backgroundColor.value = bg ?? lastMoveHighlight;\n        isHighlighted.value = true;\n        borderColor.value = border ?? lastMoveHighlight;\n      },\n      isHighlighted: () => isHighlighted.value,\n    }),\n    [backgroundColor, isHighlighted, lastMoveHighlight, borderColor]\n  );\n\n  const rHighlightedSquareStyle = useAnimatedStyle(() => {\n    return {\n      opacity: withTiming(isHighlighted.value ? 1 : 0),\n      backgroundColor: backgroundColor.value,\n      borderWidth: 0.5,\n      borderColor: borderColor.value,\n    };\n  }, []);\n\n  return (\n    <Animated.View\n      style={[styles.highlightedSquare, style, rHighlightedSquareStyle]}\n    />\n  );\n});\n\nconst styles = StyleSheet.create({\n  highlightedSquare: {\n    position: 'absolute',\n    aspectRatio: 1,\n  },\n});\n\nconst HighlightedSquare = React.memo(HighlightedSquareComponent);\n\nexport { HighlightedSquare };\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,mBAAhB,QAA2C,OAA3C;AACA,SAAoBC,UAApB,QAAiD,cAAjD;AACA,OAAOC,QAAP,IACEC,gBADF,EAEEC,cAFF,EAGEC,UAHF,QAIO,yBAJP;AAKA,SAASC,kBAAT,QAAmC,mCAAnC;AAYA,MAAMC,0BAA0B,gBAAGR,KAAK,CAACS,UAAN,CAGjC,OAAYC,GAAZ,KAAoB;EAAA,IAAnB;IAAEC;EAAF,CAAmB;EACpB,MAAM;IACJC,MAAM,EAAE;MAAEC;IAAF;EADJ,IAEFN,kBAAkB,EAFtB;EAGA,MAAMO,eAAe,GAAGT,cAAc,CAACQ,iBAAD,CAAtC;EACA,MAAME,aAAa,GAAGV,cAAc,CAAC,KAAD,CAApC;EACA,MAAMW,WAAW,GAAGX,cAAc,CAACQ,iBAAD,CAAlC;EAEAZ,mBAAmB,CACjBS,GADiB,EAEjB,OAAO;IACLO,KAAK,EAAE,MAAM;MACXF,aAAa,CAACG,KAAd,GAAsB,KAAtB;IACD,CAHI;IAILC,SAAS,EAAE,YAAuD;MAAA,IAAtD;QAAEL,eAAe,EAAEM,EAAnB;QAAuBJ,WAAW,EAAEK;MAApC,CAAsD,uEAAP,EAAO;MAChEP,eAAe,CAACI,KAAhB,GAAwBE,EAAxB,aAAwBA,EAAxB,cAAwBA,EAAxB,GAA8BP,iBAA9B;MACAE,aAAa,CAACG,KAAd,GAAsB,IAAtB;MACAF,WAAW,CAACE,KAAZ,GAAoBG,MAApB,aAAoBA,MAApB,cAAoBA,MAApB,GAA8BR,iBAA9B;IACD,CARI;IASLE,aAAa,EAAE,MAAMA,aAAa,CAACG;EAT9B,CAAP,CAFiB,EAajB,CAACJ,eAAD,EAAkBC,aAAlB,EAAiCF,iBAAjC,EAAoDG,WAApD,CAbiB,CAAnB;EAgBA,MAAMM,uBAAuB,GAAGlB,gBAAgB,CAAC,MAAM;IACrD,OAAO;MACLmB,OAAO,EAAEjB,UAAU,CAACS,aAAa,CAACG,KAAd,GAAsB,CAAtB,GAA0B,CAA3B,CADd;MAELJ,eAAe,EAAEA,eAAe,CAACI,KAF5B;MAGLM,WAAW,EAAE,GAHR;MAILR,WAAW,EAAEA,WAAW,CAACE;IAJpB,CAAP;EAMD,CAP+C,EAO7C,EAP6C,CAAhD;EASA,oBACE,oBAAC,QAAD,CAAU,IAAV;IACE,KAAK,EAAE,CAACO,MAAM,CAACC,iBAAR,EAA2Bf,KAA3B,EAAkCW,uBAAlC;EADT,EADF;AAKD,CAzCkC,CAAnC;AA2CA,MAAMG,MAAM,GAAGvB,UAAU,CAACyB,MAAX,CAAkB;EAC/BD,iBAAiB,EAAE;IACjBE,QAAQ,EAAE,UADO;IAEjBC,WAAW,EAAE;EAFI;AADY,CAAlB,CAAf;AAOA,MAAMC,iBAAiB,gBAAG9B,KAAK,CAAC+B,IAAN,CAAWvB,0BAAX,CAA1B;AAEA,SAASsB,iBAAT"}